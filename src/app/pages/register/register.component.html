<section class="mt-16">
  <form
    [formGroup]="registerUser"
    class="w-[70%] mt-4 mx-auto bg-[var(--nav-bg)] rounded-md px-10 py-10"
  >
    @if (formMode !== 2) {
    <div class="flex justify-end">
      <svg
        class="cursor-pointer"
        (click)="closeForm()"
        xmlns="http://www.w3.org/2000/svg"
        width="30"
        height="30"
        viewBox="0 0 24 24"
      >
        <path
          fill="#fff6f6"
          d="M8.116 17q-.691 0-1.153-.462T6.5 15.385V4.615q0-.69.463-1.153T8.116 3h10.769q.69 0 1.153.462t.462 1.153v10.77q0 .69-.462 1.152T18.884 17zm-3 3q-.691 0-1.153-.462T3.5 18.385V7.115q0-.213.143-.356T4 6.616t.357.143t.143.357v11.269q0 .23.192.423t.423.192h11.27q.213 0 .356.143t.144.357t-.144.357t-.356.143zm6.638-7.565l1.746-1.746l1.766 1.765q.14.14.343.13q.204-.009.345-.15t.14-.343q0-.204-.14-.345L14.188 10l1.766-1.766q.14-.14.14-.343t-.14-.345t-.345-.14t-.344.14L13.5 9.312l-1.766-1.766q-.14-.14-.334-.14t-.334.14t-.141.345q0 .203.14.344L12.813 10l-1.766 1.766q-.14.14-.13.334q.009.194.15.335q.14.14.344.14t.344-.14"
        />
      </svg>
    </div>
    }

    <h2 class="text-center text-2xl font-semibold">
      {{
        formMode === 1
          ? "Update User Profile"
          : formMode === 0
          ? "Add User!"
          : "Register to Access Your ERP Dashboard"
      }}
    </h2>
    <p class="text-center text-sm text-gray-500 dark:text-gray-300 mt-2">
      Fill in your details below to get started.
    </p>
    <!-- name -->
    <div class="mb-5 mt-6">
      <label
        for="name"
        class="block mb-2 text-[13px] font-medium text-gray-900 dark:text-white"
        >Your name</label
      >
      <input
        formControlName="full_name"
        type="text"
        id="name"
        class="input:-webkit-autofill bg-[var(--cart-bg)] text-[14px] rounded-lg w-full focus:border focus:ring-0 focus:border-gray-600 border-0 placeholder:text-neutral-700 placeholder:text-[12px] py-3"
        placeholder="please insert your fullname"
        required
      />
    </div>
    <!-- email -->
    <!-- =============== flex -->
    @if (formMode !==1) {
    <div class="mb-5">
      <label
        for="email"
        class="block mb-2 text-[13px] font-medium text-gray-900 dark:text-white"
        >Your email</label
      >
      <input
        formControlName="email"
        type="email"
        id="email"
        class="input:-webkit-autofill bg-[var(--cart-bg)] text-[14px] rounded-lg w-full focus:border focus:ring-0 focus:border-gray-600 border-0 placeholder:text-neutral-700 placeholder:text-[12px] py-3"
        placeholder="please insert your valid email"
        required
      />
    </div>
    }
    <!-- phone -->
    <div class="mb-5">
      <label
        for="phone"
        class="block mb-2 text-[13px] font-medium text-gray-900 dark:text-white"
        >Your Phone</label
      >
      <input
        formControlName="phone"
        type="tel"
        id="phone"
        class="input:-webkit-autofill bg-[var(--cart-bg)] text-[14px] rounded-lg w-full focus:border focus:ring-0 focus:border-gray-600 border-0 placeholder:text-neutral-700 placeholder:text-[12px] py-3"
        placeholder="please insert your phone number"
        required
      />
    </div>
    <!-- =============== flex -->
    @if (formMode !==1) {
    <div class="grid grid-cols-2 gap-2">
      <!-- password -->
      <div class="mb-5">
        <label
          for="password"
          class="block mb-2 text-[13px] font-medium text-gray-900 dark:text-white"
          >Your password</label
        >
        <input
          formControlName="password"
          type="password"
          id="password"
          class="input:-webkit-autofill bg-[var(--cart-bg)] text-[14px] rounded-lg w-full focus:border focus:ring-0 focus:border-gray-600 border-0 placeholder:text-neutral-700 placeholder:text-[12px] py-3"
          placeholder="please insert a strong password"
          required
        />
      </div>
      <!-- confirm password -->
      <div class="mb-5">
        <label
          for="rePassword"
          class="block mb-2 text-[13px] font-medium text-gray-900 dark:text-white"
          >Your Password again!</label
        >
        <input
          formControlName="rePassword"
          type="password"
          id="rePassword"
          class="input:-webkit-autofill bg-[var(--cart-bg)] text-[14px] rounded-lg w-full focus:border focus:ring-0 focus:border-gray-600 border-0 placeholder:text-neutral-700 placeholder:text-[12px] py-3"
          placeholder="please confirm your password"
          required
        />
      </div>
    </div>
    }
    <!-- role -->
    <div class="grid grid-cols-2 gap-2">
      <div class="mb-5">
        <label
          for="role"
          class="block mb-2 text-[13px] font-medium text-gray-900 dark:text-white"
          >Your Role
        </label>
        <select
          id="role"
          required
          formControlName="role"
          class="input:-webkit-autofill bg-[var(--cart-bg)] text-[14px] rounded-lg w-full focus:border focus:ring-0 focus:border-gray-600 border-0 placeholder:text-neutral-700 placeholder:text-[12px] py-3"
        >
          <option disabled selected value="Select a role">Select a role</option>
          <option value="Admin">Admin</option>
          <option value="Manager">Manager</option>
          <option value="Employee">Employee</option>
          <option value="Customer">Customer</option>
        </select>
      </div>
      <div class="mb-5">
        <label
          for="position"
          class="block mb-2 text-[13px] font-medium text-gray-900 dark:text-white"
          >Your Position
        </label>
        <select
          id="position"
          required
          formControlName="position"
          class="input:-webkit-autofill bg-[var(--cart-bg)] text-[14px] rounded-lg w-full focus:border focus:ring-0 focus:border-gray-600 border-0 placeholder:text-neutral-700 placeholder:text-[12px] py-3"
        >
          <option selected>Select a Position</option>
          @for (position of positions; track $index) {

          <option [value]="position.value">{{ position.label }}</option>
          }
        </select>
      </div>
    </div>
    <!-- location -->
    <div class="mb-5">
      <label
        for="location"
        class="block mb-2 text-[13px] font-medium text-gray-900 dark:text-white"
        >Your location</label
      >
      <input
        formControlName="location"
        type="text"
        id="location"
        class="input:-webkit-autofill bg-[var(--cart-bg)] text-[14px] rounded-lg w-full focus:border focus:ring-0 focus:border-gray-600 border-0 placeholder:text-neutral-700 placeholder:text-[12px] py-3"
        placeholder="please insert your location"
        required
      />
    </div>
    <!-- ======================================================== -->
    <button
      *ngIf="formMode === 1"
      type="button"
      (click)="updateUserFromForm()"
      class="mt-10 btn-register z-0 border border-zinc-700 py-2 px-10 rounded-xl text-[14px] cursor-pointer relative"
    >
      Update User!
    </button>

    <button
      *ngIf="formMode === 0"
      type="button"
      (click)="addNewUserSubmition()"
      class="mt-10 btn-register z-0 border border-zinc-700 py-2 px-10 rounded-xl text-[14px] cursor-pointer relative"
    >
      Add User!
    </button>

    <button
      *ngIf="formMode !== 0 && formMode !== 1"
      type="button"
      (click)="registerSubmition()"
      class="mt-10 btn-register z-0 border border-zinc-700 py-2 px-10 rounded-xl text-[14px] cursor-pointer relative"
    >
      Register!
    </button>
  </form>
</section>
